## 登录

- 请求地址：`http://127.0.0.1:3000/users/login`

- 请求方式：`post` 

- 请求参数：`Json` 

  | 参数         | 说明    |
  | ---------- | ----- |
  | `user_tel` | 用户手机号 |
  | `user_pwd` | 用户密码  |

- 返回参数：`Json`

  | 状态码      | 说明    | 格式                                   |
  | -------- | ----- | ------------------------------------ |
  | `u200`   | 登录成功  | `{"code":"u200","ID":"","token":""}` |
  | `u301`   | 用户不存在 | `{"code":"u301"}`                    |
  | `u302`   | 密码不正确 | `{"code":"u302"}`                    |
  | `err601` | 逻辑错误  | `{"code":"err601"}`                  |
  | `err501` | 数据库错误 | `{"code":"err501"}`                  |

## 注册

- 请求地址：`http://127.0.0.1:3000/users/register`

- 请求方式：`post` 

- 请求参数：`Json` 

  | 参数              | 说明    |
  | --------------- | ----- |
  | `user_tel`      | 用户手机号 |
  | `user_pwd`      | 用户密码  |
  | `school_id`     | 学校代号  |
  | `profession_id` | 专业代号  |

- 返回参数：`Json`

  | 状态码      | 说明    | 格式                                   |
  | -------- | ----- | ------------------------------------ |
  | `u200`   | 注册成功  | `{"code":"u200","ID":"","token":""}` |
  | `u101`   | 用户存在  | `{"code":"101"}`                     |
  | `err601` | 逻辑错误  | `{"code":"err601"}`                  |
  | `err501` | 数据库错误 | `{"code":"err501"}`                  |


## 用户数据

- 请求地址：`http://127.0.0.1:3000/users/data`

- 请求方式：`get` 

- 请求参数：`Json` 

  | 参数            | 说明   |
  | ------------- | ---- |
  | `token` （请求头） | 令牌   |

- 返回参数：`Json`
- 
  | 状态码      | 说明    | 格式                         |
  | -------- | ----- | -------------------------- |
  | `u200`   | 获取成功  | `{"code":"u200","data"{}}` |
  | `u402`   | 数据为空  | `{"code":"u402","data"{}}` |
  | `err501` | 数据库错误 | `{"code":"err501"}`        |
  | `err601` | 逻辑错误  | `{"code":"err601"}`        |
  | `err602` | 令牌失效  | `{"code":"err602"}`        |
  | `err604` | 令牌无效  | `{"code":"err604"}`        |

  ```json
  "data": {
    "id": "",
    "name": "",
    "icon": ""
  }
  ```

## 用户详情

- 请求地址：`http://127.0.0.1:3000/users/info`

- 请求方式：`post` 

- 请求参数：`Json` 

  | 参数   | 说明   |
  | ---- | ---- |
  | `ID` | 用户ID |

- 返回参数：`Json`

  | 状态码      | 说明    | 格式                            |
  | -------- | ----- | ----------------------------- |
  | `u200`   | 获取成功  | `{"code": "u200","data": {}}` |
  |          |       |                               |
  | `err601` | 逻辑错误  | `{"code":"err601"}`           |
  | `err501` | 数据库错误 | `{"code":"err501"}`           |
  ```json
  {
    "id": "用户ID",
    "name": "用户昵称",
    "describe": "用户描述",
    "icon": "用户头像",
    "profession":"专业名称"
    "follower": 2,		// 关注数（成为别人的粉丝）
    "fans": 1,		    // 粉丝数
    "question": 0,		// 提问数
    "answer": 0,			// 回答数
  }
  ```




## 搜索用户

- 请求地址：`http://127.0.0.1:3000/users/search`

- 请求方式：`post`

- 请求参数：`Json` 

  | 参数        | 说明    |
  | --------- | ----- |
  | `keyword` | 搜索关键词 |

- 返回值：`json` 

  | 状态码      | 说明   | 格式                         |
  | -------- | ---- | -------------------------- |
  | `u200`   | 查询成功 | `{"code":"u200","data":[]` |
  | `u302`   | 无该用户 | `{"code":"u302"}`          |
  | `err601` | 逻辑错误 | `{"code":"err601"}`        |

  ```json
  "data": [
    {
      "user": {
        "id": "用户ID",
        "name": "昵称",
        "describe": "描述",
        "profession": "专业",
        "icon": "头像地址"
      }
    }
  ]
  ```

  ​

## 用户的提问

- 请求地址：`http://127.0.0.1:3000/users/question`

- 请求方式：`post`

- 请求参数：`Json` 

  | 参数   | 说明   |
  | ---- | ---- |
  | `id` | 用户ID |

- 返回值：`json` 

  | 状态码      | 说明   | 格式                         |
  | -------- | ---- | -------------------------- |
  | `u200`   | 查询成功 | `{"code":"u200","data":[]` |
  | `u302`   | 无提问  | `{"code":"u302"}`          |
  | `err601` | 逻辑错误 | `{"code":"err601"}`        |

  ```json
  "data": [
    {
      "question": {
        "id": 1,
        "title": "标题",
        "link": "内容（链接）",
        "time":
        "ansNum": 1
      }
  ]
  ```

  ​

## 用户的回答

- 请求地址：`http://127.0.0.1:3000/users/answer`

- 请求方式：`post`

- 请求参数：`Json` 

  | 参数     | 说明           |
  | ------ | ------------ |
  | `id`   | 用户           |
  | `sort` | 排序（默认按点赞，可省） |
  |        | `time`       |

- 返回值：`json` 

  | 状态码      | 说明   | 格式                         |
  | -------- | ---- | -------------------------- |
  | `u200`   | 加载成功 | `{"code":"u200","data":[]` |
  | `u303`   | 无回答  | `{"code":"u303"}`          |
  | `err601` | 逻辑错误 | `{"code":"err601"}`        |

  ```json
  "data": [
    {
      "answer": {
        "id": "回答ID",
        "link": "内容（链接）",
        "time": ""
      },
      "question": {
        "id": "问题ID",
        "link": "内容（链接）",
        "time": "2"
      },
      "praise": 3	// 点赞数
    }
  ]

  // time: 2017年6月20日,星期二,12:00:00
  // time: 2 天前
  ```

## 

## 令牌

> ### [JSON Web *Token*](http://www.baidu.com/link?url=rssarJp884CG7fIFhtXjYBiGOlZn7WudQxIz69foZliFjFHRUO1ebSmul4zoTZbbg8DTORG2hyd9sPrusCGdSUdIgFuH_MCnOw3I8E16Lo3)

```javascript
{
  "iss": "标识",
  "iat": 1441593502,
  "exp": 1441594722,
  "aud": "www.example.com",
  "sub": "JWT@example.com",
  "from_user": "B",
  "target_user": "A"
}
```

- `iss`: 该JWT的签发者
- `sub`: 该JWT所面向的用户
- `aud`: 接收该JWT的一方
- `exp`(expires): 什么时候过期，这里是一个Unix时间戳
- `iat`(issued at): 在什么时候签发的

返回参数：`Json`

| 状态码      | 说明   | 格式                  |
| -------- | ---- | ------------------- |
| `err602` | 令牌失效 | `{"code":"err602"}` |
| `err604` | 令牌无效 | `{"code":"err604"}` |

下层路由：`req.ID = token.iss` 